
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>FastFood Painel Completo</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; padding: 20px; }
    section { background: #fff; padding: 15px; border: 1px solid #ddd; margin-bottom: 20px; border-radius: 5px; }
    h2 { color: #2c3e50; }
    label { display: block; margin-top: 10px; }
    input, select { padding: 5px; width: 100%; max-width: 400px; margin-top: 2px; }
    button { margin-top: 10px; padding: 8px 12px; background: #2ecc71; border: none; color: white; cursor: pointer; }
    button:hover { background: #27ae60; }
    pre { background: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; }
  </style>
</head>
<body>
<h1>FastFood Painel Completo</h1>

<section>
  <h2>1. Cadastrar Cliente</h2>
  <label>Nome</label><input id="nome">
  <label>Email</label><input id="email">
  <label>CPF</label><input id="cpf">
  <button onclick="post('/clientes', {
      nome: nome.value,
      email: email.value,
      cpf: cpf.value
    }, 'res1')">Cadastrar</button>
  <pre id="res1"></pre>
</section>

<section>
  <h2>2. Criar Produto</h2>
  <label>Nome</label><input id="prod_nome">
  <label>Descrição</label><input id="prod_desc">
  <label>Preço</label><input id="prod_preco" type="number">
  <label>Categoria</label><select id="prod_cat">
  <option>LANCHE</option><option>BEBIDA</option><option>ACOMPANHAMENTO</option><option>SOBREMESA</option>
</select>
  <label>Imagem URL</label><input id="prod_img">
  <button onclick="post('/produtos', {
      nome: prod_nome.value,
      descricao: prod_desc.value,
      preco: parseFloat(prod_preco.value),
      categoria: prod_cat.value,
      imagem_url: prod_img.value
    }, 'res2')">Criar Produto</button>
  <pre id="res2"></pre>
</section>

<section>
  <h2>3. Criar Pedido</h2>
  <label>ID Cliente (opcional)</label><input id="cliente_id">
  <button onclick="post('/pedidos', cliente_id.value ? {cliente_id: cliente_id.value} : {}, 'res3')">Criar Pedido</button>
  <pre id="res3"></pre>
</section>

<section>
  <h2>4. Adicionar Produto ao Pedido</h2>
  <label>ID Pedido</label><input id="add_pedido">
  <label>ID Produto</label><input id="add_produto">
  <label>Nome Produto</label><input id="add_nome">
  <label>Preço</label><input id="add_preco">
  <label>Categoria</label><input id="add_categoria">
  <label>Quantidade</label><input id="add_qtd" type="number" value="1">
  <button onclick="post('/pedidos/adicionar-produto', {
      pedido_id: add_pedido.value,
      produto_id: add_produto.value,
      nome: add_nome.value,
      preco: parseFloat(add_preco.value),
      categoria: add_categoria.value,
      quantidade: parseInt(add_qtd.value)
    }, 'res4')">Adicionar</button>
  <pre id="res4"></pre>
</section>

<section>
  <h2>5. Fake Checkout (Finalizar Pedido)</h2><p><em>Simula o envio do pedido para a fila, sem pagamento real.</em></p>
  <label>ID Pedido</label><input id="checkout_id">
  <button onclick="voidPost(`/pedidos/${checkout_id.value}/checkout`, 'res5')">Finalizar</button>
  <pre id="res5"></pre>
</section>







<section>
  <h2>9. Listar Pedidos Ativos</h2>
  <button onclick="get('/pedidos/ativos', 'res9')">Listar</button>
  <pre id="res9"></pre>
</section>

<script>
    const API = 'http://localhost:3000';

    async function post(path, data, el) {
      const r = await fetch(API + path, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
      });
      const res = await r.json();
      document.getElementById(el).innerText = JSON.stringify(res, null, 2);
    }

    async function voidPost(path, el) {
      const r = await fetch(API + path, { method: 'POST' });
      const res = await r.json();
      document.getElementById(el).innerText = JSON.stringify(res, null, 2);
    }

    async function patch(path, data, el) {
      const r = await fetch(API + path, {
        method: 'PATCH',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
      });
      const res = await r.json();
      document.getElementById(el).innerText = JSON.stringify(res, null, 2);
    }

    async function get(path, el) {
      const r = await fetch(API + path);
      const res = await r.json();
      document.getElementById(el).innerText = JSON.stringify(res, null, 2);
    }
  </script>
</body>
</html>
